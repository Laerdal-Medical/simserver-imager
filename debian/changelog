laerdal-simserver-imager (1.0.6) stable; urgency=medium

  * Write Progress Display: Real-time speed (MB/s) and estimated time remaining
    shown during write operations. Completion screen now displays write
    statistics including total bytes written, duration, and average speed
  * Download Speed Display: Real-time download speed (Mbps) and estimated time
    remaining shown during download and verify operations with proper
    network/disk I/O units
  * CI Artifact Selection Step: Unified wizard step for downloading CI
    artifacts and selecting files from ZIP archives, replacing modal dialogs
    with integrated wizard flow. All GitHub CI artifacts are routed through
    the artifact selection step for inspection. Direct CDN artifact files
    (.wic, .spu, .vsi) skip this step and advance directly to storage selection
  * Progress Bar Styling: All progress bars (download, write, verify) now use
    consistent Laerdal brand colors - blue for writing/downloading operations
    and green for verification, with custom styling replacing Material Design
    defaults. Created reusable ImProgressBar component with rounded borders
    (8px radius), glassy effect, and indeterminate animation support
  * ScrollBar Styling: All scrollbars now use consistent Laerdal brand styling
    with rounded corners (fully rounded pill shape), Laerdal blue color, and
    smooth hover/press state transitions. Created reusable ImScrollBar component
    that replaces default Qt ScrollBar styling across all list views and
    scrollable areas
  * Multi-Partition Detection: Added API to detect drives with multiple
    partitions for improved SPU copy warnings
  * Write Pipeline Memory Reduction: Reduced write buffer from 8MB to 1MB
    and right-sized ring buffers to match actual io_uring queue depth,
    eliminating UI stuttering caused by memory pressure (4GB+ down to ~40MB)
  * Smooth Progress Bar: Added width animation to progress bar fill for smooth
    visual transitions between completion events instead of discrete jumps
  * Utils Singleton: Consolidated utility functions (formatBytes, formatDuration,
    calculateThroughputMbps, etc.) into a centralized Utils.qml module,
    eliminating code duplication across wizard steps
  * QML Lint Compliance: Fixed unqualified property access across wizard
    components using pragma ComponentBehavior: Bound
  * Write Progress Status Consolidation: Bottleneck status shown inline with
    speed and ETA instead of as a separate line. Time remaining and throughput
    displayed during both write and verify phases. Bottleneck detection now
    distinguishes storage, network, and decompression, warning only when
    throughput drops below 15 MB/s
  * CI Build Deduplication: Prevent duplicate builds when tag and branch
    push arrive for same commit using SHA-based concurrency group
  * OS Selection Navigation: OS list model is no longer unnecessarily
    reloaded and re-sorted when navigating back to the OS selection step.
    The C++ model persists across QML component recreation, so data is only
    loaded once per session, improving performance
  * Button and Component Theming: Replace hardcoded Qt.rgba() disabled colors
    with dedicated Style properties for consistent Laerdal branding. Remove
    legacy raspberryRed alias and update all component focus/hover colors
    to use laerdalBlue
  * Private Repo Downloads Fix: Fix 404 errors when downloading release
    assets from private GitHub repositories by using the API asset endpoint
    with proper authentication headers
  * SPU Release Discovery: Include SPU files in GitHub release search filters
    so firmware updates are discovered alongside WIC and VSI images
  * ImBadge Style Fix: Fix runtime ReferenceError by using Style singleton
    directly instead of qualified RpiImager.Style access
  * Artifact File Type Detection: Fix SPU and VSI files in CI artifacts being
    incorrectly identified as WIC, causing wrong write mode to be used
  * Artifact Download Freeze: Fix CI artifact downloads hanging indefinitely
    by using proper API timeout and enabling cancellation during redirect phase
  * CI Artifact Step Navigation: Fix CIArtifactSelectionStep not appearing in
    sidebar navigation, storage selection being skipped after file selection,
    OS selection state being lost when navigating to/from artifact selection,
    back button state preservation across navigation, wrong cached files being
    shown when selecting a different CI artifact, cached selections not being
    cleared when changing download source, cache not being restored when
    navigating back from storage selection, multiple items showing different
    highlight colors by synchronizing ListView currentIndex with selected file
    index, Back button skipping OSSelectionStep by removing duplicate signal
    handler in WizardContainer, improve download cancellation UX by enabling
    Back button during download instead of changing Next button to Cancel,
    and fix non-CI artifacts (Erase, Use custom, direct WIC/VSI/SPU files)
    incorrectly routing to artifact selection step instead of directly to
    storage selection
  * Write Complete Screen Alignment: Align "Write statistics:" section with
    "Your choices:" section by using consistent heading font size, proper
    spacing, and fixed-width label columns (120px) to ensure data values
    align vertically across both sections for improved visual consistency
  * OS List Source Switch Fix: Fix system image list not updating when
    switching between CDN and GitHub artifact sources
  * Write Another Freeze: Fix application freeze when writing the same
    artifact image a second time via "Write Another". Archive streaming
    variables were cleared after first write, causing fallthrough to
    DownloadExtractThread which deadlocked on the internal archive:// URL
  * Close During Download Crash: Fix segfault when closing the application
    during a CI artifact download by disconnecting network reply signals
    before abort. Show quit confirmation dialog during downloads matching
    the existing write operation behavior
  * Direct Artifact Streaming: Single-file CI artifacts (.wic, .wic.xz, .spu)
    stream directly to USB bypassing the artifact selection step. WIC images
    use a two-stage ZIP extraction pipeline (DownloadArchiveExtractThread).
    SPU artifacts download ZIP to cache and extract entry to FAT32
  * SPU URL Streaming: SPU downloads from CDN or GitHub releases now stream
    directly to FAT32 mount while caching to disk, eliminating temp file
  * Uncompressed WIC Progress Fix: Use actual Content-Length from curl for
    write progress total when no compression filter is detected, fixing wrong
    progress for CDN .wic files with incorrect JSON metadata
  * Compressed Image Validation Fix: Skip 512-byte alignment check and fix
    >100% write progress for compressed .wic.xz files from GitHub releases
    where extract_size reflects the compressed download size. Write progress
    shows indeterminate state when decompressed size is unknown

 -- Laerdal Medical <support@laerdal.com>  Fri, 24 Jan 2025 12:00:00 +0000

laerdal-simserver-imager (1.0.5) stable; urgency=medium

  * Download Resume: Add support for resuming interrupted downloads on
    startup with user confirmation dialog
  * Branch Filter Persistence: Save and restore last selected branch filter
    across app restarts
  * Device Readiness Polling: Replaced fixed sleep delays with intelligent
    device readiness polling across all platforms (Linux, Windows, macOS).
    Operations complete faster when devices are ready and wait longer when
    devices need more time.
  * Drive List Refresh: Improved drive list refresh and UI updates
  * Touch Scrolling: Improved touch screen scrolling behavior across all
    list views and scrollable areas with smoother deceleration and better
    tap vs scroll gesture detection
  * Branch Filter Search: Branch filter dropdown now supports type-ahead
    search for quickly finding branches in large repositories. Combobox now
    selects matching branch while typing and is fully editable.
  * CLI SPU Support: Full command-line support for SPU file copy operations
    with proper mount handling
  * Windows Upgrade Fix: Preserve user cache and settings during Windows
    installer upgrades
  * macOS Build Fix: Resolve deprecation warnings and use thin LTO for
    faster builds. Fixed QRegularExpression usage in mount helper.
  * Windows FAT32 Fix: Support formatting drives larger than 32GB as FAT32
    using DiskFormatter with format.com to bypass Windows' artificial limit
  * Linux io_uring Optimization: Limit async I/O queue depth to 4 when using
    O_DIRECT to prevent massive latency buildup on USB devices. Reduces
    end-of-write drain time from ~175 seconds to ~2 seconds.
  * Write Progress Logging: Added periodic progress logging showing MB
    written, speed in MB/s, and pending writes for better diagnostics
  * SelectionListDelegate: New reusable QML delegate component providing
    consistent styling for list items with icon, title, description, badges,
    and metadata across all wizard selection screens
  * Deferred Artifact Download: CI artifacts are now downloaded only when
    user double-clicks or presses Next, reducing unnecessary downloads when
    browsing the artifact list
  * SPU Copy Flow: Improved SPU file copy workflow with auto-advance to
    done step, dedicated completion message, and display of file/drive info
  * Dialog Components: Refactored dialog components with new BaseDialog
    header system for consistent styling and reusable dialog patterns
  * Storage Removed Dialog: Show storage removed dialog when device is
    removed during write operations with improved styling
  * SPU Device Removal Fix: Set write state during SPU copy to prevent
    spurious device removal dialog
  * Mount Helper Fix: Check if device is already mounted before trying to
    get exclusive access, avoiding timeout when device is already in use
  * Large Artifact ID Fix: Support GitHub artifact IDs larger than 2^31 by
    using JavaScript's safe integer range (2^53)
  * Install Authorization Button: Added button to permission warning dialog
    for easier authorization flow
  * GitHub Artifact Handling: Improved artifact handling and branch filtering
  * File Extension Registration: WIC, VSI, and SPU files are now registered
    with the OS on all platforms (Windows, macOS, Linux). Double-click image
    files to open them directly in the imager.

 -- Laerdal Medical <support@laerdal.com>  Wed, 15 Jan 2025 12:00:00 +0000

laerdal-simserver-imager (1.0.4) unstable; urgency=medium

  * SPU Support: Full support for Software Package Update (.spu) files -
    firmware updates that are copied to a mounted device rather than flashed
    as disk images. Includes platform-specific mount/unmount helpers and
    FAT32 formatting when needed.
  * VSI Format Support: Added support for Laerdal's VSI (Versioned Sparse
    Image) disk image format - a zlib-compressed sparse format optimized
    for factory imaging with MD5 verification
  * Image Type Badges: New ImBadge component displays colored badges in OS
    selection list (SPU=indigo, WIC=emerald, VSI=cyan)
  * GitHub Source Validation: GitHub CI option is now disabled when not
    authenticated or no repositories are configured
  * Device Filtering: Improved device filtering and sorting for OS images
  * User Guide: Added comprehensive user documentation (doc/userguide.md)
  * Date Formatting: Release dates now display in user's local timezone
    and locale format instead of raw ISO 8601 timestamps
  * GitHub OAuth: Updated OAuth client ID for authentication
  * URL Handling: Fixed URL opening in GitHub login dialog
  * Suspend Inhibitor Fix: Fixed FIFO permission issue when running via
    pkexec that caused "cat: Permission denied" errors
  * Startup Image Fix: Fixed "No device selected" display when launching
    with an image file argument

 -- Laerdal Medical <support@laerdal.com>  Wed, 08 Jan 2025 14:00:00 +0000

laerdal-simserver-imager (1.0.3) unstable; urgency=medium

  * Source Selection: Fixed source type radio selection to properly show
    CDN or GitHub CI images
  * Status Display: Shows filtered image count "X images available, Y for
    this device"
  * Lazy Loading: CI images are only fetched when clicking Next after
    selecting GitHub source
  * Date Sorting: GitHub CI images are now sorted by date (newest first)
  * API Timeout: Added 30 second timeout for GitHub API calls

 -- Laerdal Medical <support@laerdal.com>  Tue, 07 Jan 2025 18:00:00 +0000

laerdal-simserver-imager (1.0.2) unstable; urgency=medium

  * Direct ZIP Streaming: Stream WIC files directly from artifact ZIPs
    to disk without intermediate extraction, saving disk space
  * Branch Filtering Fix: Cached CI artifacts now correctly appear only
    under their respective branches
  * Compression Support: Handle both compressed (.wic.gz, .wic.xz) and
    uncompressed (.wic) entries via libarchive streaming

 -- Laerdal Medical <support@laerdal.com>  Tue, 07 Jan 2025 12:00:00 +0000

laerdal-simserver-imager (1.0.1) unstable; urgency=medium

  * Artifact Inspection: CI build artifacts are now inspected to detect
    multiple installable images, allowing users to select which WIC file
    to flash
  * WIC File Extraction: Direct extraction of WIC files from cached
    artifact ZIPs with progress indication
  * Startup Image URL: Support for passing image URL via command line
    argument for automated workflows
  * Download Progress Dialog: New progress dialog with cancel support
    for artifact downloads
  * Artifact Caching: Downloaded CI artifacts are cached locally with
    validation and cache management in settings
  * Cache Management: Added cache size display and clear cache option
    in Application Options

 -- Laerdal Medical <support@laerdal.com>  Mon, 06 Jan 2025 12:00:00 +0000

laerdal-simserver-imager (1.0.0) unstable; urgency=medium

  * Initial release of Laerdal SimServer Imager
  * Fork of Raspberry Pi Imager 2.0.3 with Laerdal branding
  * Features:
    - Support for Laerdal SimPad and SimMan devices
    - GitHub repository integration for OS image downloads
    - Laerdal CDN support for image distribution
    - Custom laerdal-imager:// URI scheme for deep-linking
    - Register .laerdal-imager-manifest file type
  * Branding updates:
    - Application name: Laerdal SimServer Imager
    - Bundle identifiers: com.laerdal.simserver-imager
    - URL protocol: laerdal-imager://
    - All platform installers updated with Laerdal branding

 -- Laerdal Medical <support@laerdal.com>  Mon, 30 Dec 2024 12:00:00 +0000
